<!DOCTYPE html>
<html>
<head>

<title>Shine</title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="raphael.js"></script>

<style type="text/css">
body {
  max-width: 960px;
  margin: 0 auto;
}
.hidden {
  display: none;
}
h1, #nav {
  margin: 0;
  text-align: center;
}
input {
  width: 20px;
}
#toolbar {
  float: left;
  border: solid 1px black;
  height: 560px;
  width: 100px;
}
#toolbar p {
  margin: 0;
  font-size: .8em;
}
#rect_button span {
  display: inline-block;
  border: solid 1px black;
  height: 6px;
  width: 8px;
}
#newsave {
  border-right: solid 1px black;
  border-bottom: solid 1px black;
  padding: .5em;
}
#user_canvas {
  float: left;
  border: solid 1px black;
  position: relative;
}
#user_canvas_overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 1;
}
#user_canvas_controls {
  float: left;
  border: solid 1px black;
}
</style>

</head>
<body>

<h1>Shine</h1>

<p id="nav">
  <a href="/">Shine</a> |
  <a href="instructions">Instructions</a> |
  <a href="about">About</a> |
  <a href="news">News</a>
</p>

<div id="toolbar">
  <p><button id="rect_button"><span></span> Rect</button>
  <p class="hidden">Thickness
    <br>Corner Radius
    <br>Fill
  <p><button id="text_button">Text</button>
  <p class="hidden">Size
    <br>Font
</div>

<p>
  <span id="newsave">
    <button>New</button>
    <button>Save</button>
  </span>
  <label for="width">Width:</label>
  <input type="text" id="width" value=640>
  <label for="height">Height:</label>
  <input type="text" id="height" value=480>
  <label for="zoom">Zoom:</label>
  <input type="text" id="zoom" value="100%" style="width:25px">
  <span id="zoomslider"></span>
</p>

<div id="user_canvas">
  <div id="user_canvas_overlay"></div>
</div>

<div id="user_canvas_controls">
  <button>&#9654;Play</button>
  <span id="timeslider"></span>
  <input type="text" value="0.2s">/<input type="text" value="5s">
</div>

<script type="text/javascript">
var zoomslider = Raphael('zoomslider', 200, 20);
zoomslider.path('M 0 15 L 200 15');

var timeslider = Raphael('timeslider', 480, 20);
timeslider.path('M 0 15 L 480 15');

var user_canvas = Raphael('user_canvas', 640, 480);
var hw = user_canvas.text(50, 50, "Hello Wolrd!");

//catches all the mouse events over the user_canvas
var overlay = $('#user_canvas_overlay');

//show/hide toolbar button options
var current_button_description = $();
$('#toolbar button').click(function(){
  current_button_description.hide();
  current_button_description = $(this).parent().next().show();
  overlay.unbind();
});

var rect_counter = 0;
var rectangle = [];
  $('#user_canvas_overlay').mousedown(function(e){
    var startX = e.offsetX, startY = e.offsetY;
    var current = rectangle[rect_counter];
    current = user_canvas.rect(startX, startY, 0, 0);
    rect_counter = rect_counter + 1;
$('#rect_button').click(function(){
    $(this).mousemove(function(e){
      var x = e.offsetX, y = e.offsetY;
      current.attr({
        x: x > startX ? startX : x,
        y: y > startY ? startY : y,
        width: x > startX ? x - startX : startX - x,
        height: y > startY ? y - startY : startY - y
      });
    }).bind('mouseup mouseleave', function(){
      $(this).unbind('mousemove mouseup mouseleave');
    }).mouseleave(function(){
      current.remove();
    });
  });
});




</script>

</body>
</html>
